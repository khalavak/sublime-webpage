<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="content="width=device-width, initial-scale=1.0">
    <title>Phishing Statistics Infographic</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Define the custom color scheme as CSS variables */
        :root {
            --sofecta-deep-dark: #020c1b;
            --sofecta-dark-bg: #0a192f;
            --sofecta-navy: #112240;
            --sofecta-light-navy: #233554;
            --sofecta-accent-yellow: #FFC107;
            --sofecta-text-light: #ccd6f6;
            --sofecta-text-medium: #8892b0;
            --sofecta-white: #e6f1ff;
            --sofecta-border-radius: 8px;
            --font-family-main: 'Roboto', sans-serif;
            /* Brand Colors for the new chart */
            --brand-linkedin: #0a66c2;
            --brand-dhl: #f37521;
            --brand-google: #4285f4;
            --brand-microsoft: #f25022;
            --brand-fedex: #660099;
        }

        /* Custom CSS for Donut Chart */
        .donut-chart-container {
            width: 100%;
            padding-bottom: 100%; 
            position: relative;
            border-radius: 9999px; 
            overflow: visible; /* Must be visible to allow absolute positioned labels */
            background-color: transparent;
            box-shadow: 0 0 0 8px var(--sofecta-light-navy); 
        }

        .donut-chart-segment {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border-radius: 50%;
        }

        .donut-hole {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 60%; 
            height: 60%;
            border-radius: 50%;
            background-color: var(--sofecta-dark-bg); 
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.5); 
        }

        .center-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            pointer-events: none;
            color: var(--sofecta-text-light); 
        }

        /* Generic Bar Chart styles (used by Industry and Brand charts) */
        .chart-bar-container {
            width: 100%;
            background-color: var(--sofecta-light-navy);
            border-radius: 9999px;
            height: 12px;
            overflow: hidden;
        }
        .chart-bar {
            height: 100%;
            transition: width 1s ease-out;
            border-radius: 9999px;
        }
    </style>
    <!-- Configure Tailwind to use our custom colors -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'accent-yellow': 'var(--sofecta-accent-yellow)',
                        'text-light': 'var(--sofecta-text-light)',
                        'text-medium': 'var(--sofecta-text-medium)',
                        'dark-bg': 'var(--sofecta-dark-bg)',
                        'light-navy': 'var(--sofecta-light-navy)',
                        'brand-linkedin': 'var(--brand-linkedin)',
                        'brand-dhl': 'var(--brand-dhl)',
                        'brand-google': 'var(--brand-google)',
                        'brand-microsoft': 'var(--brand-microsoft)',
                        'brand-fedex': 'var(--brand-fedex)',
                    },
                    fontFamily: {
                        sans: ['Roboto', 'sans-serif'],
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-transparent font-sans">
    <div id="infographic" class="p-4 mx-auto max-w-6xl text-text-light">
        <h2 class="text-2xl sm:text-3xl font-bold text-center mb-10 text-text-light">
            Cyber Fraud & Phishing Trend Analysis, 2024
        </h2>

        <!-- SECTION 1: Top Attack Vectors and Industries (1x2 Grid) -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 mb-12">

            <!-- 1. DONUT CHART (Financial Fraud by Entry Vector) -->
            <div class="p-6 bg-dark-bg rounded-xl shadow-2xl shadow-light-navy/50">
                <h3 class="text-xl font-semibold mb-6 text-text-light border-b border-light-navy pb-3">
                    Financial Fraud Claims by Entry Vector
                </h3>
                <div class="flex flex-col md:flex-row items-center justify-center md:space-x-8">
                    
                    <!-- Chart -->
                    <div id="donut-chart-wrapper" class="w-full max-w-[200px] sm:max-w-[250px] md:max-w-[280px] mb-8 md:mb-0 relative">
                        <div id="donut-chart-container" class="donut-chart-container">
                            <div id="donut-segments" class="donut-chart-segment"></div>
                            <div class="donut-hole"></div>
                            <!-- Center Text: Shows the dominant Email metric -->
                            <div class="center-text">
                                <div id="main-stat-pct" class="text-4xl sm:text-5xl font-extrabold text-accent-yellow leading-none"></div>
                                <div id="main-stat-label" class="text-base sm:text-lg font-medium mt-1 text-text-light"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Legend -->
                    <div class="w-full md:w-1/2">
                        <div id="donut-legend" class="space-y-4">
                            <!-- Donut Legend items will be injected here -->
                        </div>
                    </div>
                </div>
                <p class="text-xs text-text-medium text-center mt-6">
                    *Corporate System refers to VPN, RDP, or Remote Access Tools.
                </p>
            </div>

            <!-- 2. BAR CHART (Phishing Attacks by Targeted Industry) -->
            <div class="p-6 bg-dark-bg rounded-xl shadow-2xl shadow-light-navy/50">
                <h3 class="text-xl font-semibold mb-6 text-text-light border-b border-light-navy pb-3">
                    Phishing Attacks by Targeted Industry (Top 5)
                </h3>
                <div id="industry-bar-chart-container" class="space-y-6 pt-2">
                    <!-- Industry Bar Chart content will be injected here -->
                </div>
            </div>

        </div> <!-- End Section 1 Grid -->

        <!-- SECTION 2: Brand Imitation and Impact (1x2 Grid) -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
            
            <!-- 3. BRAND IMITATION CHART -->
            <div class="p-6 bg-dark-bg rounded-xl shadow-2xl shadow-light-navy/50">
                <h3 class="text-xl font-semibold mb-6 text-text-light border-b border-light-navy pb-3">
                    Top 5 Most Imitated Brands in Phishing (Q1 2022)
                </h3>
                <div id="brand-bar-chart-container" class="space-y-6 pt-2">
                    <!-- Brand Imitation Bar Chart content will be injected here -->
                </div>
                <p class="text-xs text-text-medium mt-6">
                    Source: AAG IT & Check Point (Q1 2022 data)
                </p>
            </div>

            <!-- 4. COST STAT CALLOUT (Whaling Attack) -->
            <div class="p-6 bg-dark-bg rounded-xl shadow-2xl shadow-light-navy/50 flex flex-col justify-center items-center text-center">
                <p class="text-text-medium text-lg font-medium uppercase mb-4 tracking-wider">
                    Single Attack Cost
                </p>
                <div class="text-6xl sm:text-7xl font-extrabold text-accent-yellow leading-tight mb-4">
                    $47M
                </div>
                <p class="text-text-light text-xl font-semibold max-w-sm">
                    The average cost of a successful 'Whaling' (C-Level target) phishing attack.
                </p>
                <p class="text-sm text-text-medium mt-3">
                    (Source: FACC 2015 Incident, as reported in AAG IT)
                </p>
            </div>

        </div> <!-- End Section 2 Grid -->

    </div>

    <script>
        // --- Data ---
        const DONUT_DATA = [
            { label: 'Email', value: 83, color: 'var(--sofecta-accent-yellow)' }, 
            { label: "Insured's Vendor or Client", value: 1, color: 'var(--sofecta-navy)' }, 
            { label: 'Corporate System*', value: 4, color: 'var(--sofecta-light-navy)' }, 
            { label: 'Misc. Malicious Incidents', value: 10, color: 'var(--sofecta-text-medium)' }, 
            { label: 'Other', value: 2, color: 'var(--sofecta-text-light)' } 
        ];

        const INDUSTRY_BAR_DATA = [
            { label: 'Financial Institutions', value: 27.7, color: 'var(--sofecta-accent-yellow)' },
            { label: 'SaaS Industries', value: 17.7, color: 'var(--sofecta-accent-yellow)' },
            { label: 'Social Media Platforms', value: 10.4, color: 'var(--sofecta-accent-yellow)' },
            { label: 'Logistics and Shipping', value: 9.0, color: 'var(--sofecta-accent-yellow)' },
            { label: 'Payment Services', value: 6.0, color: 'var(--sofecta-accent-yellow)' }
        ];

        const BRAND_IMITATION_DATA = [
            { label: 'LinkedIn', value: 52, color: 'var(--brand-linkedin)' },
            { label: 'DHL', value: 14, color: 'var(--brand-dhl)' },
            { label: 'Google', value: 7, color: 'var(--brand-google)' },
            { label: 'Microsoft', value: 6, color: 'var(--brand-microsoft)' },
            { label: 'FedEx', value: 6, color: 'var(--brand-fedex)' }
        ];

        // --- Chart Rendering Functions ---

        /**
         * Renders the Donut Chart and its legend, adding labels inside the segments.
         */
        function renderDonutChart() {
            const chartSegments = document.getElementById('donut-segments');
            const legendContainer = document.getElementById('donut-legend');
            const chartContainer = document.getElementById('donut-chart-wrapper'); 
            
            if (!chartContainer) {
                console.error("Error: Could not find donut chart wrapper element.");
                return; 
            }

            // 1. Set the central Email statistic
            const emailData = DONUT_DATA.find(d => d.label === 'Email');
            if (emailData) {
                document.getElementById('main-stat-pct').textContent = `${emailData.value}%`;
                document.getElementById('main-stat-label').textContent = emailData.label;
            }

            let gradientString = 'conic-gradient(';
            let currentDegree = 0;

            // Clear previous legends
            legendContainer.innerHTML = '';
            
            // Remove previous segment labels if any (to prevent duplicates on re-render)
            Array.from(chartContainer.querySelectorAll('.absolute:not(.center-text):not(#donut-chart-container)')).forEach(el => el.remove());

            DONUT_DATA.forEach((item, index) => {
                const degrees = (item.value / 100) * 360;
                const startDegree = currentDegree;
                const endDegree = currentDegree + degrees;
                const midDegree = startDegree + degrees / 2;

                // Add segment to the gradient string
                if (item.value > 0) {
                    gradientString += `${item.color} ${startDegree}deg ${endDegree}deg`;
                    if (index < DONUT_DATA.length - 1) {
                        gradientString += ', ';
                    }
                }
                
                currentDegree = endDegree;

                // --- Label Placement Logic (Showing value for ALL segments) ---
                if (item.value > 0) {
                    // Convert mid-angle to radians, adjust -90deg so 0 is 12 o'clock (top)
                    const angleRad = (midDegree - 90) * (Math.PI / 180); 

                    // Position factor (40% radius from center, relative to container)
                    let radiusFactor = 0.40; 
                    
                    // Slightly adjust position for very small slices (like 1% or 2%) to avoid overlap with the center hole
                    if (item.value <= 2) {
                        radiusFactor = 0.55; 
                    }


                    // Calculate position (normalized to 0-100% of the chart container)
                    const x = 50 + radiusFactor * 100 * Math.cos(angleRad);
                    const y = 50 + radiusFactor * 100 * Math.sin(angleRad);

                    const labelDiv = document.createElement('div');
                    
                    // Use a stronger color contrast for text inside the segment
                    const labelColor = (item.value > 50) 
                        ? 'text-dark-bg' // Dark text for the large yellow segment
                        : 'text-text-light'; // Light text for dark segments

                    // Use different font sizes based on segment size
                    let fontSizeClass = 'text-sm sm:text-lg'; 
                    if (item.value > 50) {
                        // Dominant segment
                        fontSizeClass = 'text-lg sm:text-xl'; 
                    } else if (item.value <= 4) {
                        // Smallest segments need tiny text
                        fontSizeClass = 'text-[0.6rem] sm:text-xs'; 
                    }

                    labelDiv.className = `absolute text-center transition-opacity duration-300 ${labelColor} pointer-events-none`;
                    labelDiv.style.opacity = '1';
                    labelDiv.style.transform = 'translate(-50%, -50%)'; 
                    labelDiv.style.left = `${x}%`;
                    labelDiv.style.top = `${y}%`;

                    // ONLY show the percentage value
                    labelDiv.innerHTML = `
                        <div class="font-extrabold leading-tight ${fontSizeClass}">${item.value}%</div>
                    `;

                    // Append label to the chart's parent container
                    chartContainer.appendChild(labelDiv);
                }


                // --- Legend Item Creation ---
                const legendItem = document.createElement('div');
                legendItem.className = 'flex items-center justify-between text-base';
                
                // Use a neutral text color for the legend value, since the chart is labeled
                const valueTextColor = 'text-text-light';

                legendItem.innerHTML = `
                    <div class="flex items-center">
                        <span class="w-4 h-4 rounded-sm mr-3 flex-shrink-0" style="background-color: ${item.color}; border: 1px solid var(--sofecta-light-navy);"></span>
                        <span class="text-text-light text-sm sm:text-base">${item.label}</span>
                    </div>
                    <span class="font-bold text-lg ${valueTextColor}">${item.value}%</span>
                `;
                legendContainer.appendChild(legendItem);
            });

            // Clean up the trailing comma and apply gradient
            if (gradientString.endsWith(', ')) {
                gradientString = gradientString.slice(0, -2);
            }
            gradientString += ')';
            chartSegments.style.backgroundImage = gradientString;
        }

        /**
         * Renders the Horizontal Bar Chart for Industries.
         */
        function renderIndustryBarChart() {
            const container = document.getElementById('industry-bar-chart-container');
            const maxVal = Math.max(...INDUSTRY_BAR_DATA.map(item => item.value));

            INDUSTRY_BAR_DATA.forEach(item => {
                // Calculate width relative to the max value
                const widthPercent = (item.value / maxVal) * 100;
                
                const barItem = document.createElement('div');
                barItem.className = 'group';
                barItem.innerHTML = `
                    <div class="flex justify-between mb-1 text-sm sm:text-base">
                        <span class="text-text-light">${item.label}</span>
                        <span class="font-bold text-accent-yellow">${item.value}%</span>
                    </div>
                    <div class="chart-bar-container">
                        <div class="chart-bar" style="width: 0%; background-color: ${item.color};" data-width="${widthPercent}"></div>
                    </div>
                `;
                container.appendChild(barItem);
            });
        }

        /**
         * Renders the Horizontal Bar Chart for Brand Imitation.
         */
        function renderBrandImitationChart() {
            const container = document.getElementById('brand-bar-chart-container');
            const maxVal = Math.max(...BRAND_IMITATION_DATA.map(item => item.value));

            BRAND_IMITATION_DATA.forEach(item => {
                // Calculate width relative to the max value
                const widthPercent = (item.value / maxVal) * 100;
                
                const barItem = document.createElement('div');
                barItem.className = 'group';
                barItem.innerHTML = `
                    <div class="flex justify-between mb-1 text-sm sm:text-base">
                        <span class="text-text-light">${item.label}</span>
                        <span class="font-bold" style="color: ${item.color};">${item.value}%</span>
                    </div>
                    <div class="chart-bar-container">
                        <div class="chart-bar" style="width: 0%; background-color: ${item.color};" data-width="${widthPercent}"></div>
                    </div>
                `;
                container.appendChild(barItem);
            });
        }

        /**
         * Animates all bars to their final widths.
         */
        function animateAllBars() {
            setTimeout(() => {
                document.querySelectorAll('.chart-bar').forEach(bar => {
                    bar.style.width = bar.dataset.width + '%';
                });
            }, 100);
        }


        // --- Initialization ---

        document.addEventListener('DOMContentLoaded', () => {
            renderDonutChart();
            renderIndustryBarChart();
            renderBrandImitationChart();
            
            // Wait briefly before animating to ensure elements are in DOM
            animateAllBars();
        });
    </script>
</body>
</html>